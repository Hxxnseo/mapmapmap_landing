<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MAP-BTI :: 32ê°€ì§€ ë¯¸ê° ì„±í–¥ ì •ë°€ ì§„ë‹¨</title>
  <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
  <script defer src="/_vercel/insights/script.js"></script>
  <style>
    :root {
      --agree-color: #ff4d4d;
      --disagree-color: #7bed9f;
      --bg-color: #121212;
      --text-main: #ffffff;
      --text-sub: #aaaaaa;
    }

    body {
      font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, sans-serif;
      background-color: var(--bg-color);
      color: var(--text-main);
      margin: 0;
      padding: 0;
      display: flex;
      justify-content: center;
      min-height: 100vh;
      -webkit-font-smoothing: antialiased;
    }

    .container {
      width: 100%;
      max-width: 700px;
      padding: 40px 20px;
      box-sizing: border-box;
      text-align: center;
    }

    /* ìº¡ì²˜ ì˜ì—­ */
    #capture-area {
      background-color: var(--bg-color);
      padding: 30px 15px;
      border-radius: 20px;
      margin: 0 auto;
    }

    h1 {
      font-size: 2.5rem;
      font-weight: 800;
      margin-bottom: 10px;
      color: var(--agree-color);
      letter-spacing: -1px;
    }

    .subtitle {
      color: var(--text-sub);
      margin-bottom: 50px;
      line-height: 1.6;
    }

    .header-status {
      position: sticky;
      top: 0;
      background: rgba(18, 18, 18, 0.95);
      z-index: 100;
      padding: 15px 0 20px 0;
      border-bottom: 1px solid rgba(255, 255, 255, .5);
      margin-bottom: 20px;
      backdrop-filter: blur(10px);
    }

    .progress-wrapper {
      width: 100%;
      height: 6px;
      background: #333;
      border-radius: 10px;
      overflow: hidden;
      margin-top: 15px;
    }

    .progress-bar {
      height: 100%;
      width: 0%;
      transition: width 0.4s ease;
      background: linear-gradient(90deg, var(--disagree-color), var(--agree-color));
    }

    .question-item {
      padding: 40px 0;
      border-bottom: 1px solid rgba(255, 255, 255, .5);
      animation: fadeIn 0.6s ease;
    }

    .q-number {
      font-size: 1rem;
      font-weight: 700;
      color: var(--agree-color);
      margin-bottom: 4px;
    }

    .q-text {
      font-size: 1.25rem;
      font-weight: 700;
      color: #eee;
      margin-bottom: 35px;
      line-height: 1.5;
      word-break: keep-all;
    }

    .options-wrapper {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 10px;
      position: relative;
      padding-bottom: 35px;
      margin-top: 20px;
    }

    input[type="radio"] {
      display: none;
    }

    .circle-label {
      display: block;
      border-radius: 50%;
      cursor: pointer;
      border: 2px solid;
      background: transparent;
      transition: all 0.2s;
      position: relative;
    }

    .circle-1,
    .circle-7 {
      width: 50px;
      height: 50px;
    }

    .circle-2,
    .circle-6 {
      width: 38px;
      height: 38px;
    }

    .circle-3,
    .circle-5 {
      width: 28px;
      height: 28px;
    }

    .circle-4 {
      width: 20px;
      height: 20px;
      border-color: #444;
    }

    .circle-1,
    .circle-2,
    .circle-3 {
      border-color: var(--disagree-color);
    }

    .circle-5,
    .circle-6,
    .circle-7 {
      border-color: var(--agree-color);
    }

    .circle-label:hover {
      transform: scale(1.15);
    }

    input:checked+.circle-1 {
      background: var(--disagree-color);
      box-shadow: 0 0 15px var(--disagree-color);
    }

    input:checked+.circle-2 {
      background: var(--disagree-color);
      opacity: 0.8;
    }

    input:checked+.circle-3 {
      background: var(--disagree-color);
      opacity: 0.6;
    }

    input:checked+.circle-4 {
      background: #777;
      border-color: #777;
    }

    input:checked+.circle-5 {
      background: var(--agree-color);
      opacity: 0.6;
    }

    input:checked+.circle-6 {
      background: var(--agree-color);
      opacity: 0.8;
    }

    input:checked+.circle-7 {
      background: var(--agree-color);
      box-shadow: 0 0 15px var(--agree-color);
    }

    .side-label {
      display: none;
    }

    .circle-1::after {
      content: "ì•„ë‹ˆë‹¤";
      position: absolute;
      top: 115%;
      left: 50%;
      transform: translateX(-50%);
      color: var(--disagree-color);
      font-size: 0.85rem;
      font-weight: bold;
      white-space: nowrap;
    }

    .circle-7::after {
      content: "ê·¸ë ‡ë‹¤";
      position: absolute;
      top: 115%;
      left: 50%;
      transform: translateX(-50%);
      color: var(--agree-color);
      font-size: 0.85rem;
      font-weight: bold;
      white-space: nowrap;
    }

    @media (min-width: 600px) {
      .options-wrapper {
        padding-bottom: 0;
        gap: 15px;
      }

      .side-label {
        display: block;
        font-size: 1rem;
        font-weight: bold;
      }

      .label-agree {
        color: var(--agree-color);
        margin-left: 15px;
      }

      .label-disagree {
        color: var(--disagree-color);
        margin-right: 15px;
      }

      .circle-1::after,
      .circle-7::after {
        display: none;
      }
    }

    @media (max-width: 600px) {
      .question-item {
        padding: 20px 0;
      }
    }

    .btn-container {
      display: flex;
      justify-content: center;
      gap: 15px;
      margin-top: 50px;
    }

    .btn-action {
      background: linear-gradient(135deg, var(--agree-color), #ff7e7e);
      color: #121212;
      border: none;
      padding: 18px 50px;
      font-size: 1.1rem;
      font-weight: 800;
      border-radius: 50px;
      cursor: pointer;
      transition: 0.3s;
      box-shadow: 0 5px 20px rgba(255, 77, 77, 0.3);
      word-break: keep-all;
    }

    .btn-action:disabled {
      background: #333;
      color: #777;
      cursor: not-allowed;
      box-shadow: none;
    }

    .btn-action:hover:not(:disabled) {
      transform: translateY(-3px);
      box-shadow: 0 8px 30px rgba(255, 77, 77, 0.5);
    }

    .btn-secondary {
      background: #333;
      color: #aaa;
      border: 1px solid #555;
      padding: 18px 30px;
      font-size: 1rem;
      font-weight: 700;
      border-radius: 50px;
      cursor: pointer;
      transition: 0.3s;
    }

    /* CTA ë²„íŠ¼ ì»¨í…Œì´ë„ˆ */
    .cta-buttons-wrapper {
      display: flex;
      justify-content: center;
      gap: 12px;
      margin-top: 20px;
    }

    .btn-cta-common {
      color: white;
      border: none;
      padding: 16px 10px;
      font-size: 0.95rem;
      font-weight: 800;
      border-radius: 16px;
      cursor: pointer;
      transition: transform 0.2s;
      width: 100%;
      max-width: 280px;
      flex: 1;
      display: block;
      align-items: center;
      justify-content: center;
      text-align: center;
      line-height: 1.4;
    }

    .btn-cta-common:hover {
      transform: scale(1.03);
    }

    .btn-insta {
      background: linear-gradient(45deg, #f09433, #dc2743, #bc1888);
      box-shadow: 0 5px 15px rgba(220, 39, 67, 0.3);
    }

    .btn-landing {
      background: linear-gradient(45deg, #7bed9f, #2ecc71);
      color: #121212;
      box-shadow: 0 5px 15px rgba(123, 237, 159, 0.3);
    }

    /* ê²°ê³¼ í™”ë©´ */
    .result-header {
      margin-bottom: 25px;
      /* animation: fadeIn 0.8s ease; */
    }

    #modal-img-container {
      text-align: center;
    }

    .type-code {
      font-size: 3.5rem;
      font-weight: 800;
      margin: 5px 0;
      letter-spacing: 2px;
      background: linear-gradient(to right, var(--agree-color), #fff);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      display: inline-block;
    }

    /* ìº¡ì²˜ ì‹œ ê·¸ë¼ë°ì´ì…˜ ì œê±° (íë¦¼ ë°©ì§€) */
    body.capturing-mode .type-code {
      background: none !important;
      -webkit-text-fill-color: var(--agree-color) !important;
      color: var(--agree-color) !important;
    }

    .type-alias {
      font-size: 1.4rem;
      color: #fff;
      font-weight: 600;
      margin-top: 5px;
    }

    .result-bars-container {
      margin: 20px 0;
      padding: 25px 15px;
      background: #1e1e1e;
      border-radius: 20px;
      border: 1px solid #333;
    }

    .result-row {
      margin-bottom: 15px;
    }

    .bar-title {
      color: #ccc;
      font-size: 0.85rem;
      font-weight: bold;
      margin-bottom: 6px;
      text-align: left;
    }

    .bar-wrapper {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 10px;
    }

    .pct {
      font-weight: bold;
      width: 35px;
      text-align: center;
      font-size: 0.85rem;
      color: #555;
    }

    .pct.winner {
      color: #fff;
      font-size: 1rem;
      text-shadow: 0 0 5px rgba(255, 255, 255, 0.3);
    }

    .track-center-split {
      display: flex;
      flex-grow: 1;
      height: 10px;
      background: #111;
      border-radius: 6px;
      overflow: hidden;
    }

    .half-track {
      flex: 1;
      display: flex;
      height: 100%;
    }

    .half-track.left {
      justify-content: flex-end;
      border-right: 1px solid #333;
    }

    .half-track.right {
      justify-content: flex-start;
    }

    .fill {
      height: 100%;
      opacity: 0.2;
      transition: width 1s ease-out;
    }

    .fill.win {
      opacity: 1;
    }

    .fill.red {
      background: var(--agree-color);
    }

    .fill.green {
      background: var(--disagree-color);
    }

    .label-row {
      display: flex;
      justify-content: space-between;
      margin-top: 4px;
      font-size: 0.75rem;
      color: #666;
      font-weight: bold;
    }

    .content-section {
      text-align: left;
      margin-top: 25px;
      color: #ddd;
      line-height: 1.6;
      font-size: 0.95rem;
      padding: 0 5px;
    }

    .content-section p {
      margin-bottom: 12px;
    }

    .section-title {
      font-size: 1.2rem;
      font-weight: bold;
      color: #fff;
      border-bottom: 2px solid #444;
      padding-bottom: 8px;
      margin-bottom: 15px;
      margin-top: 25px;
    }

    /* ë¸Œëœë“œ ì›Œí„°ë§ˆí¬ */
    .brand-footer {
      margin-top: 25px;
      padding-top: 15px;
      border-top: 1px dashed #333;
      color: #777;
      font-size: 0.8rem;
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 8px;
    }

    /* ìƒˆë¡œìš´ CTA ì»¨í…Œì´ë„ˆ ìŠ¤íƒ€ì¼ */
    .cta-container {
      position: relative;
      margin-top: 40px;
      z-index: 10;
      padding: 0 20px 50px 20px;
      background: linear-gradient(to bottom, transparent, var(--bg-color) 15%);
    }

    /* ìƒˆë¡œìš´ ì›Œí„°ë§ˆí¬ ìŠ¤íƒ€ì¼ */
    .new-brand-watermark {
      font-size: 1.1rem;
      font-weight: bold;
      color: #ffffff;
      margin-bottom: 30px;
      letter-spacing: -0.5px;
    }

    /* [ì¶”ê°€] ì´ë¯¸ì§€ ì €ì¥ìš© íŒì—… ëª¨ë‹¬ */
    #result-img-modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.85);
      z-index: 9999;
      align-items: center;
      justify-content: center;
      flex-direction: column;
    }

    #result-img-modal img {
      max-width: 85%;
      max-height: 70vh;
      border-radius: 10px;
      box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
      margin-bottom: 20px;
    }

    .modal-guide-text {
      color: #fff;
      margin-bottom: 15px;
      font-size: 1.2rem;
      font-weight: bold;
      text-align: center;
      text-shadow: 0 2px 4px rgba(0, 0, 0, 0.8);
    }

    .modal-close-btn {
      background: #444;
      color: #fff;
      border: 1px solid #666;
      padding: 12px 30px;
      border-radius: 30px;
      cursor: pointer;
      font-weight: bold;
      font-size: 1rem;
    }

    .hidden {
      display: none;
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(20px);
      }

      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
  </style>
</head>

<body>

  <div class="container">
    <div id="start-screen">
      <h1>ğŸ”¥ MAP-BTI</h1>
      <p class="subtitle">
        32ê°€ì§€ ìœ í˜•ìœ¼ë¡œ ì•Œì•„ë³´ëŠ” ë¯¸ê° ì •ë°€ ì§„ë‹¨<br>
        <span style="font-size:0.9rem; color:#666;">(Dark Mode Optimized)</span>
      </p>
      <div style="margin: 50px 0;">
        <p style="font-size:0.8rem; color:#888; margin-bottom:20px;">CHECK GUIDE</p>
        <div class="options-wrapper" style="pointer-events: none;">
          <span class="side-label label-disagree">ì•„ë‹ˆë‹¤</span>
          <div class="circle-label circle-1"
            style="background:var(--disagree-color); box-shadow:0 0 15px var(--disagree-color)"></div>
          <div class="circle-label circle-2"></div>
          <div class="circle-label circle-4" style="border-color:#555"></div>
          <div class="circle-label circle-6"></div>
          <div class="circle-label circle-7"
            style="background:var(--agree-color); box-shadow:0 0 15px var(--agree-color)"></div>
          <span class="side-label label-agree">ê·¸ë ‡ë‹¤</span>
        </div>
      </div>
      <button class="btn-action" onclick="startTest()">ê²€ì‚¬ ì‹œì‘</button>
    </div>

    <div id="test-screen" class="hidden">
      <div class="header-status">
        <div
          style="display:flex; justify-content:space-between; font-size:0.9rem; font-weight:bold; color:#888; margin-bottom:5px;">
          <span>ANALYSIS PROGRESS</span>
          <span><span id="curr-page-num" style="color:#fff">1</span> / 7</span>
        </div>
        <div class="progress-wrapper">
          <div class="progress-bar" id="progress-bar"></div>
        </div>
      </div>
      <div id="questions-container"></div>

      <div class="btn-container">
        <button id="prev-btn" class="btn-secondary" onclick="prevPage()" style="display:none;">ì´ì „</button>
        <button id="next-btn" class="btn-action" onclick="nextPage()" disabled>ë‹¤ìŒ í˜ì´ì§€</button>
      </div>
    </div>

    <div id="loading-screen" class="hidden">
      <div style="margin-top:80px;">
        <h2 style="color:#fff;">ë°ì´í„° ë¶„ì„ ì¤‘...</h2>
        <p style="color:#666;">32ê°€ì§€ ì„±í–¥ ë°ì´í„° ë§¤ì¹­ ì¤‘</p>
      </div>
    </div>

    <div id="result-screen" class="hidden">

      <div id="capture-area">
        <div class="result-header">
          <p style="color:#888; font-size:0.85rem; font-weight:bold; margin-bottom:5px;">YOUR TASTE TYPE</p>
          <h1 id="result-type-code" class="type-code">CODE</h1>
          <div id="result-alias" class="type-alias">Alias</div>
        </div>

        <div class="result-bars-container" id="chart-area"></div>

        <div class="content-section" id="intro-content"></div>

        <div class="brand-footer">
          <span>ğŸ”¥ MAP-BTI Test by</span>
          <strong style="color:#fff">@mapmapmap.zip</strong>
        </div>
      </div>

      <div class="cta-container">

        <p style="color:#aaa; font-size:0.95rem; margin-top:10px; margin-bottom:20px; line-height:1.6;">
          <strong>ì‹¤íŒ¨ ì—†ëŠ” ë§¤ìš´ ë§›ì§‘</strong>ì„ ì°¾ê³  ì‹¶ìœ¼ì‹ ê°€ìš”?<br>
          ì €í¬ê°€ ë§Œë“¤ê³  ìˆëŠ” <strong>'ë§µë§µë§µ'</strong>ì„ í™•ì¸í•´ë³´ì„¸ìš”!
        </p>

        <div class="cta-buttons-wrapper">
          <button class="btn-cta-common btn-insta" onclick="shareToInstagram()">
            ğŸ“¸ ê²°ê³¼ ê³µìœ <br><span style="font-size:0.85rem; font-weight:normal">(íƒœê·¸ ìë™ë³µì‚¬)</span>
          </button>
          <button class="btn-cta-common btn-landing" onclick="goToLandingPage()">
            ğŸš€ ë§µë§µë§µ<br>êµ¬ê²½í•˜ê¸°
          </button>
        </div>
      </div>
    </div>
  </div>

  <div id="result-img-modal">
    <div class="modal-guide-text">â¬‡ï¸ ê¾¹ ëˆŒëŸ¬ì„œ ì´ë¯¸ì§€ ì €ì¥!</div>
    <div id="modal-img-container"></div>
    <button class="modal-close-btn" onclick="closeModal()">ë‹«ê¸°</button>
  </div>

  <script>
    // --- 49ë¬¸í•­ ë°ì´í„° ---
    const questions = [
      { id: 1, text: "ë§¤ìš´ ìŒì‹ì„ ë¨¹ê³  ë•€ì„ í˜ë¦¬ë©´ ìŠ¤íŠ¸ë ˆìŠ¤ê°€ í’€ë¦¬ëŠ” ê¸°ë¶„ì´ ë“ ë‹¤.", targets: ['H'] },
      { id: 2, text: "ë§ˆëŠ˜ì„ ë¨¹ê³  ë‚œ ë’¤ ì…ì—ì„œ ë‚˜ëŠ” ëƒ„ìƒˆê°€ ì‹ ê²½ ì“°ì—¬ êº¼ë ¤ì§„ë‹¤.", targets: ['A'], reverse: true },
      { id: 3, text: "í›„ì¶”ë¥¼ ë¿Œë ¸ì„ ë•Œ ëŠê»´ì§€ëŠ” íŠ¹ìœ ì˜ í–¥ê³¼ ëŠë‚Œì„ ì¢‹ì•„í•œë‹¤.", targets: ['P'] },
      { id: 4, text: "ì™€ì‚¬ë¹„ì˜ ì½”ê°€ ì°¡í•œ ëŠë‚Œì€ ìŒì‹ ë§›ì„ ë°©í•´í•˜ëŠ” 'ê³ í†µ'ì¼ ë¿ì´ë¼ê³  ìƒê°í•œë‹¤.", targets: ['W'], reverse: true },
      { id: 5, text: "ë§ˆë¼íƒ•ì´ë‚˜ í› ê¶ˆì˜ í˜€ê°€ ì–¼ì–¼í•œ ëŠë‚Œ(ë§ˆë¹„ê°)ì„ ì¦ê¸´ë‹¤.", targets: ['E'] },
      { id: 6, text: "ë‚˜ëŠ” ë§¤ìš´ë§›ë³´ë‹¤ëŠ” ë‹´ë°±í•˜ê³  ìˆœí•œ ë§›ì„ ì„ í˜¸í•œë‹¤.", targets: ['H'], reverse: true },
      { id: 7, text: "í–¥ì‹ ë£Œ(ê³ ìˆ˜, ì‚°ì´ˆ ë“±) í–¥ì´ ê°•í•œ ìŒì‹ì€ ë¶€ë‹´ìŠ¤ëŸ½ë‹¤.", targets: ['E'], reverse: true },
      // Page 2
      { id: 8, text: "ê³°íƒ•ì´ë‚˜ ì„¤ë íƒ•ì€ í›„ì¶”ë‚˜ ê¹ë‘ê¸° êµ­ë¬¼ ì—†ì´ 'í•˜ì–€ êµ­ë¬¼' ê·¸ëŒ€ë¡œ ë¨¹ëŠ” ê²Œ ì œì¼ ë§›ìˆë‹¤.", targets: ['P', 'H'], reverse: true },
      { id: 9, text: "ì°Œê°œë‚˜ êµ­ë¬¼ ìš”ë¦¬ì— ë‹¤ì§„ ë§ˆëŠ˜ì´ ë“¬ë¿ ë“¤ì–´ê°€ ê±¸ì­‰í•œ ê²ƒì„ ì¢‹ì•„í•œë‹¤.", targets: ['A'] },
      { id: 10, text: "í•´ì¥ ë©”ë‰´ë¡œëŠ” ë§µê³  ë¹¨ê°„ êµ­ë¬¼ë³´ë‹¤, ë§‘ê³  ì‹œì›í•œ ì§€ë¦¬(ë§‘ì€íƒ•)ë‚˜ ì½©ë‚˜ë¬¼êµ­ì´ ì¢‹ë‹¤.", targets: ['H'], reverse: true },
      { id: 11, text: "ì¹¼êµ­ìˆ˜ë‚˜ ë§Œë‘£êµ­ì— í›„ì¶”ê°€ ë§ì´ ë“¤ì–´ê°€ ì¹¼ì¹¼í•œ ë§›ì„ ì¦ê¸´ë‹¤.", targets: ['P'] },
      { id: 12, text: "ê³ ê¸°ë¥¼ ë¨¹ì„ ë•Œ, ë§ˆëŠ˜ì´ë‚˜ ì–‘íŒŒë¥¼ ê³ë“¤ì—¬ ë¨¹ëŠ” ê²ƒì„ ì¢‹ì•„í•œë‹¤.", targets: ['A'] },
      { id: 13, text: "ë¹¨ê°„ êµ­ë¬¼ ìš”ë¦¬(ë§ˆë¼, ì¶”ì–´íƒ•)ì— ì–¼ì–¼í•œ ë§› í–¥ì‹ ë£Œ(ì‚°ì´ˆ ë“±)ì˜ í–¥ì„ ì¢‹ì•„í•œë‹¤.", targets: ['E', 'H'] },
      { id: 14, text: "ëƒ‰ë©´ì„ ë¨¹ì„ ë•Œ ê²¨ì/ì‹ì´ˆë¥¼ ë„£ì–´ ìê·¹ì ìœ¼ë¡œ ë¨¹ëŠ”ë‹¤.", targets: ['W'] },
      // Page 3
      { id: 15, text: "ì‚¼ê²¹ì‚´ì´ë‚˜ ê³ ê¸°ë¥¼ ë¨¹ì„ ë•Œ ìƒì™€ì‚¬ë¹„ë¥¼ ì–¹ì–´ ë¨¹ëŠ” ì¡°í•©ì„ ì¢‹ì•„í•œë‹¤.", targets: ['W'] },
      { id: 16, text: "ì–‘ê¼¬ì¹˜ë¥¼ ë¨¹ì„ ë•Œ ì¯”ë€(íë¯¼) ì–‘ë…ì„ ê³ ê¸°ê°€ ì°ì–´ ë¨¹ëŠ” ê²ƒì„ ì¢‹ì•„í•œë‹¤.", targets: ['E'] },
      { id: 17, text: "ëŠë¼í•œ íŠ€ê¹€ì´ë‚˜ ì „ì„ ë¨¹ì„ ë•Œ ì²­ì–‘ê³ ì¶”ê°€ ë“¤ì–´ê°„ ê°„ì¥ì´ í•„ìˆ˜ë‹¤.", targets: ['H'] },
      { id: 18, text: "ìŠ¤í…Œì´í¬ë‚˜ ê³ ê¸‰ ìš”ë¦¬ì— í–¥ì‹ ë£Œ(í›„ì¶” ë“±)ê°€ ë“¤ì–´ê°€ë©´ ì¬ë£Œ ë³¸ì—°ì˜ ë§›ì„ í•´ì¹œë‹¤ê³  ìƒê°í•œë‹¤.", targets: ['P'], reverse: true },
      { id: 19, text: "ê³ ê¸°ë¥¼ ë¨¹ì„ ë•Œ êµ¬ìš´ ë§ˆëŠ˜ì´ë‚˜ ìƒë§ˆëŠ˜ì„ ê³ë“¤ì´ëŠ” ê²ƒì„ ì„ í˜¸í•˜ì§€ ì•ŠëŠ”ë‹¤.", targets: ['A'], reverse: true },
      { id: 20, text: "ë§ˆë¼ìƒ¹ê¶ˆì²˜ëŸ¼ ê¸°ë¦„ì§€ê³  ë§µê³  ì–¼ì–¼í•œ ë³¶ìŒ ìš”ë¦¬ë¥¼ ì¢‹ì•„í•œë‹¤.", targets: ['E', 'H'] },
      { id: 21, text: "ì¹˜í‚¨ì´ë‚˜ ê³ ê¸° ìš”ë¦¬ëŠ” ìê·¹ì ì¸ ì–‘ë…(ë§¤ìš´, ê²¨ì, ë§ˆëŠ˜ ë“±)ë³´ë‹¤ëŠ” 'ì†Œê¸ˆ'ë§Œ ì‚´ì§ ì°ì–´ ë¨¹ëŠ” ê²Œ ë² ìŠ¤íŠ¸ë‹¤.", targets: ['H', 'A', 'W'], reverse: true },
      // Page 4
      { id: 22, text: "ë¼ë©´ì„ ë“ì¼ ë•Œ ì²­ì–‘ê³ ì¶”ë‚˜ ê³ ì¶§ê°€ë£¨ë¥¼ ì¶”ê°€ë¡œ ë„£ëŠ” ê²ƒì„ ì¢‹ì•„í•œë‹¤.", targets: ['H'] },
      { id: 23, text: "ì•Œë¦¬ì˜¤ ì˜¬ë¦¬ì˜¤ íŒŒìŠ¤íƒ€ì²˜ëŸ¼ ë§ˆëŠ˜ í–¥ì´ ê°•í•˜ê²Œ ë°°ì–´ìˆëŠ” ì˜¤ì¼ íŒŒìŠ¤íƒ€ë¥¼ ì¢‹ì•„í•œë‹¤.", targets: ['A'] },
      { id: 24, text: "ì§œì¥ë©´ì´ë‚˜ ìš°ë™ì— ê³ ì¶§ê°€ë£¨ë¥¼ ë¿Œë ¤ ì‚´ì§ ë§¤ì½¤í•˜ê²Œ ë¨¹ëŠ” ê²ƒì„ ì¦ê¸´ë‹¤.", targets: ['H'] },
      { id: 25, text: "ë§ˆë¼íƒ• ê°€ê²Œì— ê°€ë©´ ë¹¨ê°„ êµ­ë¬¼ë³´ë‹¤ëŠ” í•˜ì–€ êµ­ë¬¼(ë°±íƒ•)ì´ë‚˜ 0ë‹¨ê³„ë¥¼ ì‹œí‚¤ëŠ” í¸ì´ë‹¤.", targets: ['H', 'E'], reverse: true },
      { id: 26, text: "ì‹ë‹¹ì—ì„œ ìŒì‹ì´ ë‚˜ì™”ëŠ”ë° ê¸°ë³¸ìœ¼ë¡œ í›„ì¶” ê°„ì´ ë˜ì–´ ìˆëŠ” ê²ƒì´ ì‹«ë‹¤.", targets: ['P'], reverse: true },
      { id: 27, text: "ëƒ‰ëª¨ë°€(ì†Œë°”)ì„ ë¨¹ì„ ë•Œ êµ­ë¬¼ ë§›ì´ ë³€í•˜ë”ë¼ë„ ì™€ì‚¬ë¹„ë¥¼ í’€ì–´ì„œ ë¨¹ëŠ” ê²ƒì„ ì¢‹ì•„í•œë‹¤.", targets: ['W'] },
      { id: 28, text: "ì‹ì‚¬ ì¤‘ì— ë•€ì´ ë‚˜ê±°ë‚˜ í˜€ê°€ ì•„í”ˆ ëŠë‚Œ(ë§¤ìš´ë§›)ì´ ë“¤ë©´ ì§œì¦ì´ ë‚œë‹¤.", targets: ['H'], reverse: true },
      // Page 5
      { id: 29, text: "ê¸°ë³¸ì ìœ¼ë¡œ ë‚˜ì˜¨ ì´ˆë°¥ì— ì™€ì‚¬ë¹„ë¥¼ ì¡°ê¸ˆ ëœì–´ë‚´ê³  ë¨¹ëŠ” í¸ì´ë‹¤.", targets: ['W'], reverse: true },
      { id: 30, text: "ë§¤ìš´íƒ•ì´ë‚˜ ì§€ë¦¬íƒ•ì— í›„ì¶”ì™€ ë¯¸ë‚˜ë¦¬, ë§ˆëŠ˜ì´ ë“¤ì–´ê°„ ì‹œì›í•œ ë§›ì„ ì¢‹ì•„í•œë‹¤.", targets: ['P', 'A'] },
      { id: 31, text: "ì´ˆì¥ì´ë‚˜ ê°„ì¥ì— ì™€ì‚¬ë¹„ë¥¼ ì„ì–´ ë§¤ì½¤ ìƒˆì½¤í•˜ë©´ì„œ í†¡ ì˜ëŠ” ë§›ì„ ì¦ê¸´ë‹¤.", targets: ['W'] },
      { id: 32, text: "ë‚™ì§€ë³¶ìŒì´ë‚˜ ì­ˆê¾¸ë¯¸ ë³¶ìŒì€ ë§¤ì½¤í•œ ë§›ì´ ìˆì–´ì•¼ ë§›ìˆë‹¤.", targets: ['H'] },
      { id: 33, text: "ë˜ ì–Œê¿ì´ë‚˜ ë™ë‚¨ì•„ ìŒì‹ íŠ¹ìœ ì˜ í–¥ì‹ ë£Œ ë§›ì— ê±°ë¶€ê°ì„ ëŠë‚€ë‹¤.", targets: ['E'], reverse: true },
      { id: 34, text: "ê°„ì¥ ê²Œì¥ì´ë‚˜ ìƒˆìš°ì¥ì„ ë¨¹ì„ ë•Œ ì²­ì–‘ê³ ì¶”ì˜ ë§¤ì½¤í•¨ì´ ê³ë“¤ì—¬ì§„ ê²Œ ì¢‹ë‹¤.", targets: ['H'] },
      { id: 35, text: "í•´ì‚°ë¬¼ ìš”ë¦¬ì— ì‹œì¦ˆë‹(í›„ì¶”, ë ˆëª¬ ë“±)ì´ ë§ì´ ë¿Œë ¤ì§„ ìŠ¤íƒ€ì¼ì„ ì¢‹ì•„í•œë‹¤.", targets: ['P'] },
      // Page 6
      { id: 36, text: "ë§¤ìš´ ê²ƒì„ ì˜ ë¨¹ëŠ” ê²ƒê³¼ëŠ” ê´€ê³„ì—†ì´, ìŠ¤íŠ¸ë ˆìŠ¤ë¥¼ ë°›ìœ¼ë©´ ìê·¹ì ì¸ ìŒì‹ì´ ë•¡ê¸´ë‹¤.", targets: ['H'] },
      { id: 37, text: "ìŠ¤í”„ë¥¼ í›„ì¶”ì™€ í•¨ê»˜ ë¨¹ëŠ” ê²ƒì„ ì¢‹ì•„í•˜ëŠ” í¸ì´ë‹¤", targets: ['P'] },
      { id: 38, text: "ìê·¹ì ì¸ ë¹„ë¹”ëƒ‰ë©´ë³´ë‹¤ëŠ” ìŠ´ìŠ´í•œ ë§›ì˜ 'í‰ì–‘ëƒ‰ë©´'ì´ë‚˜ 'ë¬¼ëƒ‰ë©´' ìœ¡ìˆ˜ë¥¼ í›¨ì”¬ ì¢‹ì•„í•œë‹¤.", targets: ['H', 'A', 'P'], reverse: true },
      { id: 39, text: "ìƒˆë¡œìš´ í–¥ì‹ ë£Œë‚˜ ë‚¯ì„  ìê·¹ì ì¸ ë§›ì— ë„ì „í•˜ëŠ” ê²ƒì´ ì¦ê²ë‹¤.", targets: ['E'] },
      { id: 40, text: "ì½”ê°€ ì°¡í•˜ê±°ë‚˜ í†¡ ì˜ëŠ” ë§›(ì™€ì‚¬ë¹„, ê²¨ì ë“±)ì„ ì¦ê¸°ëŠ” í¸ì´ë‹¤.", targets: ['W'] },
      { id: 41, text: "ë§ˆëŠ˜ì´ ìˆëŠ” ìŒì‹ë³´ë‹¤ëŠ” ì—†ëŠ” ìŒì‹ì„ ì¦ê¸°ëŠ” í¸ì´ë‹¤.", targets: ['A'], reverse: true },
      { id: 42, text: "ë°¥ì„ ë¨¹ì„ ë•Œ ê¹€ì¹˜ë‚˜ ì¥ì•„ì°Œê°€ ì—†ì–´ë„, ë©”ì¸ ë°˜ì°¬ë§Œ ìˆìœ¼ë©´ ë°¥ í•œ ê³µê¸°ëŠ” ëšë”±ì´ë‹¤.", targets: ['H', 'A'], reverse: true },
      // Page 7
      { id: 43, text: "í› ê¶ˆë‚˜ ê³ ê¸°ë¥¼ ì°ì–´ ë¨¹ì„ ë•Œ, ë‹¤ì§„ ë§ˆëŠ˜ì´ë‚˜ í–¥ì‹ ë£Œë¥¼ ë„£ì€ ë‚˜ë§Œì˜ ì–‘ë…ì¥ì„ ë§Œë“¤ì–´ ë¨¹ëŠ”ë‹¤.", targets: ['E', 'A'] },
      { id: 44, text: "í›„ì¶”ì™€ ê³ ì¶§ê°€ë£¨ê°€ ë“¤ì–´ê°„ 'êµë™ì§¬ë½•' ìŠ¤íƒ€ì¼ì˜ ë¬µì§í•œ êµ­ë¬¼ì„ ì‚¬ë‘í•œë‹¤.", targets: ['P', 'H'] },
      { id: 45, text: "ì…ì•ˆì´ ì–¼ì–¼í•œ ê³ ì¶”ì˜ ë§¤ìš´ë§›ë³´ë‹¤ëŠ”, ì½”ê°€ ë»¥ ëš«ë¦¬ëŠ” ì™€ì‚¬ë¹„ë‚˜ ê²¨ìì˜ í†¡ ì˜ëŠ” ë§›ì´ ë” ë§¤ë ¥ì ì´ë‹¤.", targets: ['W'], antiTargets: ['H'] },
      { id: 46, text: "ë‹¨ìˆœíˆ ë§µê¸°ë§Œ í•œ ê²ƒë³´ë‹¤ëŠ”, í›„ì¶”ì™€ í–¥ì‹ ë£Œê°€ ë’¤ì„ì—¬ í˜€ê°€ ì–¼ì–¼í•˜ê³  ë¬µì§í•˜ê²Œ íƒ€ê²©ê°ì´ ìˆëŠ” ë§¤ìš´ë§›ì„ ì„ í˜¸í•œë‹¤.", targets: ['H', 'E', 'P'] },
      { id: 47, text: "ëƒ‰ì±„ì¡±ë°œ, ì–‘ì¥í”¼ì²˜ëŸ¼ ê²¨ì ì†ŒìŠ¤ê°€ ìˆëŠ” ìš”ë¦¬ì˜ í†¡ ì˜ëŠ” ë§›ì„ ì¦ê¸´ë‹¤.", targets: ['W'] },
      { id: 48, text: "êµ­ë¬¼ ìš”ë¦¬ì— í›„ì¶”ë¥¼ ë„£ì„ ë•Œ, ë‚¨ë“¤ë³´ë‹¤ ë” ë§ì´ ë¿Œë¦¬ëŠ” í¸ì´ë‹¤.", targets: ['P'] },
      { id: 49, text: "ë§¤ìš´ë§›, ì–¼ì–¼í•œ ë§›, í†¡ ì˜ëŠ” ë§›... ì¢…ë¥˜ë¥¼ ê°€ë¦¬ì§€ ì•Šê³  ëª¨ë“  ìê·¹ì„ ë‹¤ ì¦ê¸¸ ìˆ˜ ìˆë‹¤.", targets: ['H', 'E', 'P', 'A', 'W'] }
    ];

    // --- 32ê°€ì§€ ìœ í˜• ìƒì„¸ ë°ì´í„° ---
    const typeInfo = {
      'HEPA-W': { alias: "ë„íŒŒë¯¼ í­ì£¼ ê¸°ê´€ì°¨", desc: "ê³ í†µì„ ì¾Œë½ìœ¼ë¡œ ë°”ê¾¸ëŠ” ë¯¸ê°ì˜ ì •ì " },
      'HEPA-N': { alias: "ì •í†µíŒŒ ë§ˆë¼ ë§¤ë‹ˆì•„", desc: "ì½” ì°¡í•œ ì™€ì‚¬ë¹„ë§Œ ë¹¼ê³  ë‹¤ ì˜ ë¨¹ëŠ” ê°•ì²  ìœ„ì¥" },
      'HEPO-W': { alias: "ì´êµ­ì ì¸ í–¥ì‹ ë£Œ ì‚¬ëƒ¥ê¾¼", desc: "í•œêµ­ ë§ˆëŠ˜ë§›ë³´ë‹¤ í•´ì™¸ì˜ ë‚¯ì„  í–¥ì‹ ë£Œë¥¼ ì„ í˜¸í•¨" },
      'HEPO-N': { alias: "í“¨ì „ ë§ˆë¼ ëŸ¬ë²„", desc: "í•œêµ­ì ì´ì§€ ì•Šì€ ì´êµ­ì ì¸ ë§¤ìš´ë§›ë§Œ ì™ì™ ê³¨ë¼ë¨¹ìŒ" },
      'HESA-W': { alias: "ì†Œí”„íŠ¸ ë„íŒŒë¯¼ í—Œí„°", desc: "í›„ì¶”ì˜ íƒ€ê²©ê°ì€ ì‹«ì§€ë§Œ ë‚˜ë¨¸ì§€ ëª¨ë“  ìê·¹ì€ í™˜ì˜í•˜ëŠ” ë¯¸ì‹ê°€" },
      'HESA-N': { alias: "ë¶€ë“œëŸ¬ìš´ ë§ˆë¼íƒ•", desc: "í›„ì¶” ì—†ì´ ë¶€ë“œëŸ¬ìš´ êµ­ë¬¼ì— ë§ˆë¼ì™€ ë§ˆëŠ˜ì„ ì¦ê¸°ëŠ” íƒ€ì…" },
      'HESO-W': { alias: "ë¶€ë“œëŸ¬ìš´ ì¹´ë¦¬ìŠ¤ë§ˆ", desc: "ë§ˆëŠ˜ê³¼ í›„ì¶”ëŠ” ì‹«ì§€ë§Œ, ë§ˆë¼ì™€ ì™€ì‚¬ë¹„ì˜ ë‚ ì¹´ë¡œìš´ ë§›ì€ ì¦ê¹€" },
      'HESO-N': { alias: "ë§ˆë¼íƒ• ì…ë¬¸ì", desc: "ë§ˆë¼ì˜ ì–¼ì–¼í•¨ì€ ì¢‹ì§€ë§Œ, ê°•í•œ ë§ˆëŠ˜ì´ë‚˜ ì™€ì‚¬ë¹„ ë“± ë‹¤ë¥¸ ìê·¹ì€ ë¶€ë‹´" },
      'HIPA-W': { alias: "ì–¼í°í•œ K-ì•„ì¬ ì…ë§›", desc: "ë§ˆë¼(í–¥ì‹ ë£Œ)ëŠ” ì‹«ì§€ë§Œ í•œêµ­ì‹ ë§¤ìš´ë§›ì€ ë§ˆìŠ¤í„°" },
      'HIPA-N': { alias: "í† ì¢… í•œêµ­ì¸ ì…ë§›", desc: "ê¹€ì¹˜ì°Œê°œ, êµ­ë°¥, ë§¤ìš´íƒ•. í•œêµ­ì¸ì˜ ë°¥ìƒ ê·¸ ìì²´" },
      'HIPO-W': { alias: "ìŠ¤í…Œì´í¬í˜• ë§¤ìš´ë§›", desc: "ë§ˆëŠ˜ ì—†ì´ ê³ ê¸°, í›„ì¶”, ì™€ì‚¬ë¹„, ë§¤ìš´ë§›ì„ ì¦ê¹€" },
      'HIPO-N': { alias: "ì‹¬í”Œí•œ ë§¤ìš´ë§›", desc: "ë³µì¡í•œ í–¥ ì—†ì´ ì˜¤ì§ ìº¡ì‚¬ì´ì‹ ì˜ íƒ€ê²©ê°ë§Œ ì¦ê¹€" },
      'HISA-W': { alias: "ê¹”ë”í•œ ë§¤ìš´ë§› ì„ í˜¸ê°€", desc: "í›„ì¶”ì˜ í…í…í•¨ì€ ì‹«ê³  ê¹”ë”í•˜ê²Œ ë§¤ìš´ë§›ì„ ì¦ê¹€" },
      'HISA-N': { alias: "ë‹´ë°±í•œ ë§¤ìš´ë§›", desc: "ìê·¹ì ì¸ í›„ì¶”/í–¥ì‹ ë£Œ ì—†ì´ ê¹”ë”í•˜ê²Œ ë§¤ìš´ë§›ë§Œ ì¦ê¹€" },
      'HISO-W': { alias: "ì™€ì‚¬ë¹„ ë§¤ë‹ˆì•„", desc: "ë‹¤ë¥¸ ìê·¹ì€ í•„ìš” ì—†ë‹¤. ì˜¤ì§ ë§¤ìš´ë§›ê³¼ ì½” ì°¡í•¨ë§Œ!" },
      'HISO-N': { alias: "ì„ íƒì  ë§¤ìš´ë§›", desc: "ë§¤ìš´ê±´ ì¢‹ì§€ë§Œ ë‹¤ë¥¸ í–¥ì‹ ë£Œë‚˜ ìê·¹ì€ ê±°ë¶€í•œë‹¤" },
      'MEPA-W': { alias: "ë§µì°”ì´ ë¯¸ì‹ê°€", desc: "ë§¤ìš´ê±´ ëª» ë¨¹ì§€ë§Œ í–¥ì‹ ë£Œì™€ ìê·¹ì€ ì¦ê¸°ëŠ” ëª¨í—˜ê°€" },
      'MEPA-N': { alias: "ë§ˆë¼íƒ• ìˆœí•œë§› (ë°±íƒ•)", desc: "ë§¤ìš´ê±´ ì‹«ì§€ë§Œ ë§ˆë¼ì˜ ì–¼ì–¼í•¨ê³¼ ì§„í•œ ë§›ì€ í¬ê¸° ëª»í•´" },
      'MEPO-W': { alias: "ì´êµ­ì ì¸ ë¸ŒëŸ°ì¹˜ ìŠ¤íƒ€ì¼", desc: "ë§¤ìš´ í•œì‹ë³´ë‹¤ëŠ” í›„ì¶”ì™€ í—ˆë¸Œê°€ ë“¤ì–´ê°„ ì–‘ì‹íŒŒ" },
      'MEPO-N': { alias: "ìˆœí•œë§› ì—ìŠ¤ë‹‰ í‘¸ë“œ", desc: "ë§¤ìš´ë§›ë„, ë§ˆëŠ˜ë„ ì‹«ì§€ë§Œ ì´êµ­ì ì¸ í–¥ì€ ì¢‹ì•„í•¨" },
      'MESA-W': { alias: "ì„¬ì„¸í•œ ë¯¸ì‹ê°€", desc: "ë§µê³  í…í…í•œ ê±´ ì‹«ì§€ë§Œ, ë§ˆëŠ˜/í–¥ì‹ ë£Œ/ì™€ì‚¬ë¹„ì˜ í’ë¯¸ëŠ” ì‚¬ë‘í•¨" },
      'MESA-N': { alias: "í–¥ê¸‹í•œ ìŒ€êµ­ìˆ˜", desc: "ìê·¹ì ì´ì§€ ì•Šê³  ë§ˆëŠ˜ê³¼ í–¥ì‹ ë£Œê°€ ì–´ìš°ëŸ¬ì§„ ê¹Šì€ ë§›ì„ ì„ í˜¸" },
      'MESO-W': { alias: "í†¡ ì˜ëŠ” ìƒëŸ¬ë“œ", desc: "ê°€ë³ê³  ìƒí¼í•˜ë©´ì„œ ì½”ê°€ ë»¥ ëš«ë¦¬ëŠ” ë§›ì„ ì„ í˜¸" },
      'MESO-N': { alias: "í˜¸ê¸°ì‹¬ ë§ì€ ìˆœí•œë§›", desc: "ë§µì§„ ì•Šì§€ë§Œ í˜€ê°€ ì–¼ì–¼í•œ ë…íŠ¹í•œ ëŠë‚Œì„ ì¦ê¹€" },
      'MIPA-W': { alias: "ì¼ì‹ ëˆê¹ŒìŠ¤ ë§¤ë‹ˆì•„", desc: "ë§¤ìš´ê±´ ì‹«ì§€ë§Œ ì™€ì‚¬ë¹„, í›„ì¶”, ë§ˆëŠ˜ì˜ í’ë¯¸ëŠ” ì‚¬ë‘í•¨" },
      'MIPA-N': { alias: "ì§„í•œ ê³°íƒ• ë§¤ë‹ˆì•„", desc: "ë§¤ìš´ë§› ì—†ì´ í›„ì¶”ì™€ ë§ˆëŠ˜ë¡œ ë‚¸ ê¹Šì€ ë§›ì„ ì‚¬ë‘í•¨" },
      'MIPO-W': { alias: "ê³ ê¸‰ ìŠ¤í…Œì´í¬ ì·¨í–¥", desc: "ì¬ë£Œ ë³¸ì—°ì˜ ë§›ì— í›„ì¶”ì™€ ì™€ì‚¬ë¹„ë§Œ ì‚´ì§ ë”í•¨" },
      'MIPO-N': { alias: "í‰ì–‘ëƒ‰ë©´ ë§¤ë‹ˆì•„", desc: "ìŠ´ìŠ´í•œ ë§› ì†ì— í›„ì¶” í–¥ë§Œ ì‚´ì§ ì¦ê¸°ëŠ” ë¯¸ì‹ê°€" },
      'MISA-W': { alias: "ì´ˆë°¥ê³¼ ì‚¼ê²¹ì‚´", desc: "í›„ì¶”/ë§ˆë¼ ì—†ì´ ê¹”ë”í•˜ê²Œ ì™€ì‚¬ë¹„ì™€ ë§ˆëŠ˜ë§Œ ê³ë“¤ì„" },
      'MISA-N': { alias: "í•œêµ­ì¸ì˜ ë°¥ìƒ (ìˆœí•œë§›)", desc: "ëœì¥ì°Œê°œì²˜ëŸ¼ êµ¬ìˆ˜í•˜ê³  ë§ˆëŠ˜ ë“¤ì–´ê°„ ì•ˆ ë§¤ìš´ í•œì‹" },
      'MISO-W': { alias: "ìŠ¤ì‹œ ì¥ì¸", desc: "ì•„ë¬´ ìê·¹ë„ ì‹«ì§€ë§Œ ì™€ì‚¬ë¹„ í•˜ë‚˜ë§Œí¼ì€ í—ˆë½í•œë‹¤" },
      'MISO-N': { alias: "ìˆœìˆ˜í•œ ì•„ê¸° ì…ë§›", desc: "ìê·¹ ì—†ëŠ” í‰í™”ë¡œìš´ ë§›ì„ ì¶”êµ¬í•˜ëŠ” ìˆœìˆ˜ì£¼ì˜ì" },
      'DEFAULT': { alias: "ì•Œ ìˆ˜ ì—†ëŠ” ë¯¸ì‹ê°€", desc: "ë§¤ìš° ë…íŠ¹í•œ ì·¨í–¥ì˜ ì†Œìœ ì" }
    };

    let currentPage = 1;
    const totalPages = 7;
    const itemsPerPage = 7;
    let answers = {};

    function startTest() {
      document.getElementById('start-screen').classList.add('hidden');
      document.getElementById('test-screen').classList.remove('hidden');
      renderPage(1);
    }

    function renderPage(pageNum) {
      currentPage = pageNum;
      document.getElementById('curr-page-num').innerText = pageNum;
      document.getElementById('progress-bar').style.width = `${((pageNum - 1) / totalPages) * 100}%`;

      const container = document.getElementById('questions-container');
      container.innerHTML = '';
      const startIdx = (pageNum - 1) * itemsPerPage;
      const endIdx = startIdx + itemsPerPage;
      const pageQuestions = questions.slice(startIdx, endIdx);

      pageQuestions.forEach((q) => {
        const itemDiv = document.createElement('div');
        itemDiv.className = 'question-item';
        itemDiv.id = `q-item-${q.id}`;

        const itemNumDiv = document.createElement('div');
        itemNumDiv.className = 'q-number';
        itemNumDiv.innerText = `Q${q.id}`;
        itemDiv.appendChild(itemNumDiv);

        const textDiv = document.createElement('div');
        textDiv.className = 'q-text';
        textDiv.innerText = q.text;
        itemDiv.appendChild(textDiv);

        const optWrapper = document.createElement('div');
        optWrapper.className = 'options-wrapper';

        const disagreeLabel = document.createElement('span');
        disagreeLabel.className = 'side-label label-disagree';
        disagreeLabel.innerText = 'ì•„ë‹ˆë‹¤';
        optWrapper.appendChild(disagreeLabel);

        for (let i = 1; i <= 7; i++) {
          const inputId = `q${q.id}-opt-${i}`;
          const input = document.createElement('input');
          input.type = 'radio'; input.name = `q-${q.id}`; input.value = i; input.id = inputId;
          if (answers[q.id] === i) input.checked = true;
          input.onclick = () => { handleAnswer(q.id, i); };

          const label = document.createElement('label');
          label.className = `circle-label circle-${i}`;
          label.htmlFor = inputId;
          optWrapper.appendChild(input); optWrapper.appendChild(label);
        }

        const agreeLabel = document.createElement('span');
        agreeLabel.className = 'side-label label-agree';
        agreeLabel.innerText = 'ê·¸ë ‡ë‹¤';
        optWrapper.appendChild(agreeLabel);

        itemDiv.appendChild(optWrapper);
        container.appendChild(itemDiv);
      });
      updateNextButton(); window.scrollTo(0, 0);
    }

    function handleAnswer(qId, val) {
      answers[qId] = val; updateNextButton();
      const currentItem = document.getElementById(`q-item-${qId}`);
      if (currentItem && currentItem.nextElementSibling) currentItem.nextElementSibling.scrollIntoView({ behavior: 'smooth', block: 'center' });
    }

    function prevPage() {
      if (currentPage > 1) {
        renderPage(currentPage - 1);
      }
    }

    function updateNextButton() {
      const startIdx = (currentPage - 1) * itemsPerPage;
      const endIdx = startIdx + itemsPerPage;
      const pageQIds = questions.slice(startIdx, endIdx).map(q => q.id);
      const allAnswered = pageQIds.every(id => answers[id] !== undefined);

      const nextBtn = document.getElementById('next-btn');
      const prevBtn = document.getElementById('prev-btn');

      if (allAnswered) {
        nextBtn.disabled = false;
        nextBtn.innerText = (currentPage === totalPages) ? "ê²°ê³¼ ë³´ê¸°" : "ë‹¤ìŒ í˜ì´ì§€";
        nextBtn.onclick = (currentPage === totalPages) ? finishTest : nextPage;
      } else {
        nextBtn.disabled = true;
        nextBtn.innerText = "ëª¨ë“  ì§ˆë¬¸ì— ë‹µí•´ì£¼ì„¸ìš”";
      }

      if (currentPage === 1) {
        prevBtn.style.display = 'none';
      } else {
        prevBtn.style.display = 'block';
      }
    }

    function nextPage() { renderPage(currentPage + 1); }
    function finishTest() {
      document.getElementById('test-screen').classList.add('hidden');
      document.getElementById('loading-screen').classList.remove('hidden');
      setTimeout(calculateAndShowResult, 2000);
    }

    function calculateAndShowResult() {
      let rawScores = { H: 0, E: 0, P: 0, A: 0, W: 0 };
      let maxScores = { H: 0, E: 0, P: 0, A: 0, W: 0 };

      questions.forEach(q => {
        const userVal = answers[q.id];
        let score = q.reverse ? (8 - userVal) : userVal;
        let antiScore = q.reverse ? userVal : (8 - userVal);

        if (q.targets) {
          q.targets.forEach(target => {
            rawScores[target] += score;
            maxScores[target] += 7;
          });
        }
        if (q.antiTargets) {
          q.antiTargets.forEach(target => {
            rawScores[target] += antiScore;
            maxScores[target] += 7;
          });
        }
      });

      const P = {};
      ['H', 'E', 'P', 'A', 'W'].forEach(t => {
        if (maxScores[t] === 0) P[t] = 0;
        else P[t] = Math.round((rawScores[t] / maxScores[t]) * 100);
      });

      document.getElementById('loading-screen').classList.add('hidden');
      document.getElementById('result-screen').classList.remove('hidden');

      const code =
        (P.H >= 50 ? 'H' : 'M') +
        (P.E >= 50 ? 'E' : 'I') +
        (P.P >= 50 ? 'P' : 'S') +
        (P.A >= 50 ? 'A' : 'O') + '-' +
        (P.W >= 50 ? 'W' : 'N');

      const info = typeInfo[code] || typeInfo['DEFAULT'];
      const content = generateAnalysisContent(code, P, info);

      document.getElementById('result-type-code').innerText = code;
      document.getElementById('result-alias').innerText = `"${info.alias}"`;

      renderChart(P);
      document.getElementById('intro-content').innerHTML = content.intro;
    }

    function renderChart(P) {
      const chartArea = document.getElementById('chart-area');
      chartArea.innerHTML = '';
      const items = [
        { title: 'CAPSAICIN (ë§¤ìš´ë§›)', left: 'HOT', right: 'MILD', score: P.H },
        { title: 'ELECTRIC (í–¥ì‹ ë£Œ)', left: 'ELECTRIC', right: 'INNOCUOUS', score: P.E },
        { title: 'PEPPER (íƒ€ê²©ê°)', left: 'PEPPER', right: 'SMOOTH', score: P.P },
        { title: 'AROMA (ì•Œì‹¸í•¨)', left: 'AROMA', right: 'ODERLESS', score: P.A },
        { title: 'WASABI (ì½”ì°¡)', left: 'WASABI', right: 'NON-WASABI', score: P.W }
      ];
      items.forEach(item => {
        const redScore = item.score; const greenScore = 100 - item.score; const isRedWin = redScore >= 50;
        const redBarWidth = isRedWin ? (redScore - 50) * 2 : 0;
        const greenBarWidth = !isRedWin ? (greenScore - 50) * 2 : 0;

        const html = `
                <div class="result-row">
                    <div class="bar-title">${item.title}</div>
                    <div class="bar-wrapper">
                        <span class="pct ${isRedWin ? 'winner' : ''}">${redScore}%</span>
                        <div class="track-center-split">
                            <div class="half-track left"><div class="fill red ${isRedWin ? 'win' : ''}" style="width:${redBarWidth}%"></div></div>
                            <div class="half-track right"><div class="fill green ${!isRedWin ? 'win' : ''}" style="width:${greenBarWidth}%"></div></div>
                        </div>
                        <span class="pct ${!isRedWin ? 'winner' : ''}">${greenScore}%</span>
                    </div>
                    <div class="label-row">
                        <span style="color:${isRedWin ? 'var(--agree-color)' : '#666'}">${item.left}</span>
                        <span style="color:${!isRedWin ? 'var(--disagree-color)' : '#666'}">${item.right}</span>
                    </div>
                </div>`;
        chartArea.insertAdjacentHTML('beforeend', html);
      });
    }

    function generateAnalysisContent(code, P, info) {
      let introText = `<div class="section-title">ì†Œê°œ: ${info.desc}</div>`;

      if (code.includes('H')) {
        introText += `<p>ë‹¹ì‹ ì€ ê¸°ë³¸ì ìœ¼ë¡œ <strong style="color:var(--agree-color)">ê°•ë ¬í•œ ìê·¹</strong>ì„ ì¦ê¸°ëŠ” ëª¨í—˜ê°€ì…ë‹ˆë‹¤. ìº¡ì‚¬ì´ì‹ ì˜ ëœ¨ê±°ìš´ í†µì¦ì„ 'ì‹œì›í•˜ë‹¤'ê³  ëŠë¼ë©°, ìŠ¤íŠ¸ë ˆìŠ¤ë¥¼ ë§¤ìš´ë§›ìœ¼ë¡œ í•´ì†Œí•˜ëŠ” ê²½í–¥ì´ ìˆìŠµë‹ˆë‹¤.</p>`;
      } else {
        introText += `<p>ë‹¹ì‹ ì€ <strong style="color:var(--disagree-color)">ì¬ë£Œ ë³¸ì—°ì˜ ë§›</strong>ì„ ì¤‘ì‹œí•˜ëŠ” ìˆœìˆ˜ì£¼ì˜ìì…ë‹ˆë‹¤. í˜€ê°€ ëŠë¼ëŠ” ê³ í†µë³´ë‹¤ëŠ” ì„¬ì„¸í•œ í’ë¯¸ì™€ ì¡°í™”ë¥¼ ì‚¬ë‘í•˜ë©°, ìê·¹ì ì¸ ì–‘ë…ë³´ë‹¤ëŠ” ë§‘ê³  ê¹¨ë—í•œ ë§›ì—ì„œ í–‰ë³µì„ ëŠë‚ë‹ˆë‹¤.</p>`;
      }
      if (code.includes('E')) introText += `<p>ë˜í•œ, ë§ˆë¼ë‚˜ ë˜ ì–Œê¿ì²˜ëŸ¼ <strong style="color:var(--agree-color)">ì´êµ­ì ì´ê³  ê°•ë ¬í•œ í–¥ì‹ ë£Œ</strong>ë¥¼ ì¦ê¸°ë©°, ë¯¸ê°ì ì¸ ëª¨í—˜ì„ ë‘ë ¤ì›Œí•˜ì§€ ì•ŠëŠ” ì§„ì •í•œ ë¯¸ì‹ê°€ì…ë‹ˆë‹¤.</p>`;
      else introText += `<p>ë°˜ë©´, ë‚¯ì„  í–¥ì‹ ë£Œë³´ë‹¤ëŠ” <strong style="color:var(--disagree-color)">ìµìˆ™í•˜ê³  í¸ì•ˆí•œ í–¥ê¸°</strong>ë¥¼ ì„ í˜¸í•˜ë©°, ê²€ì¦ëœ ë§›ì§‘ì—ì„œ ì•ˆì •ì ì¸ ì‹ì‚¬ë¥¼ ì¦ê¸°ëŠ” ê²ƒì„ ì¢‹ì•„í•©ë‹ˆë‹¤.</p>`;

      if (code.includes('W')) introText += `<p>íŠ¹íˆ <strong style="color:var(--agree-color)">ì™€ì‚¬ë¹„ë‚˜ ê²¨ì</strong>ì˜ ì½” ì°¡í•œ ê°ê°ì„ ì¦ê¸°ëŠ” ê²ƒìœ¼ë¡œ ë³´ì•„, ìˆœê°„ì ì¸ ê°ì„± íš¨ê³¼ì™€ ë‘ë‡Œ ìê·¹ì„ ì¦ê¸°ëŠ” ì·¨í–¥ì„ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤.</p>`;
      else introText += `<p>ì½”ë¥¼ ì°Œë¥´ëŠ” ë‚ ì¹´ë¡œìš´ ìê·¹ë³´ë‹¤ëŠ”, ì…ì•ˆ ì „ì²´ë¥¼ ê°ì‹¸ëŠ” <strong style="color:var(--disagree-color)">ë¶€ë“œëŸ½ê³  ë¬µì§í•œ ê°ì¹ ë§›</strong>ì„ í›¨ì”¬ ë” ì¤‘ìš”í•˜ê²Œ ìƒê°í•˜ëŠ” íƒ€ì…ì…ë‹ˆë‹¤.</p>`;

      const hasP = code.includes('P');
      const hasA = code.includes('A');
      if (hasP && hasA) {
        introText += `<p>ë§ˆëŠ˜ê³¼ í›„ì¶”ë¥¼ ëª¨ë‘ ì„ í˜¸í•˜ëŠ” ë‹¹ì‹ ì€ <strong style="color:var(--agree-color)">ì „í˜•ì ì¸ í•œêµ­ì¸ì˜ ì†Œìš¸</strong>ì„ ê°€ì¡ŒìŠµë‹ˆë‹¤. ë§µê³  ì§œê³  ì§„í•œ êµ­ë¬¼ ìš”ë¦¬ê°€ ë‹¹ì‹ ì˜ íë§ í‘¸ë“œì…ë‹ˆë‹¤.</p>`;
      } else if (!hasP && !hasA) {
        introText += `<p>ë§ˆëŠ˜ì˜ í…í…í•¨ì´ë‚˜ í›„ì¶”ì˜ ë§¤ìºí•¨ ì—†ì´, <strong style="color:var(--disagree-color)">ì¬ë£Œ ë³¸ì—°ì˜ ë§‘ê³  íˆ¬ëª…í•œ ìœ¡ìˆ˜</strong>ë‚˜ ì†Œê¸ˆìœ¼ë¡œë§Œ ê°„ì„ í•œ ê¹”ë”í•œ ë§›ì„ ì‚¬ë‘í•©ë‹ˆë‹¤.</p>`;
      } else if (hasA) {
        introText += `<p>í›„ì¶”ì˜ ê°€ë£¨ ì”¹íˆëŠ” ëŠë‚Œì€ ì‹«ì§€ë§Œ, <strong style="color:#fff">í•œêµ­ì¸ì˜ í˜ì¸ ë§ˆëŠ˜</strong>ì˜ ê¹Šê³  ì§„í•œ í’ë¯¸ë§Œí¼ì€ í¬ê¸°í•  ìˆ˜ ì—†ëŠ” 'ë§ˆëŠ˜ ëŸ¬ë²„'ì…ë‹ˆë‹¤.</p>`;
      } else {
        introText += `<p>ë§ˆëŠ˜ì˜ ê°•í•œ ëƒ„ìƒˆëŠ” ë¶€ë‹´ìŠ¤ëŸ½ì§€ë§Œ, ìŒì‹ì˜ ì¡ë‚´ë¥¼ ì¡ê³  í’ë¯¸ë¥¼ ì‚´ë ¤ì£¼ëŠ” <strong style="color:#fff">í›„ì¶”ì˜ ì•Œì‹¸í•œ í„°ì¹˜</strong>ëŠ” ì¦ê¸°ëŠ” ì„¸ë ¨ëœ ì…ë§›ì…ë‹ˆë‹¤.</p>`;
      }

      return { intro: introText };
    }

    // [ì¤‘ìš”] ì¸ìŠ¤íƒ€ê·¸ë¨ ê³µìœ  ìˆ˜ì •: ê³µìœ  ì‹¤íŒ¨ ì‹œ 'ì´ë¯¸ì§€ íŒì—…' ë„ìš°ê¸°
    // [ì¤‘ìš”] ì¸ìŠ¤íƒ€ê·¸ë¨ ê³µìœ  ìˆ˜ì •: ê³µìœ  ì‹¤íŒ¨ ì‹œ 'ì´ë¯¸ì§€ íŒì—…' ë„ìš°ê¸°
    async function shareToInstagram() {
      const captureArea = document.getElementById('capture-area');
      const instagramId = "@mapmapmap.zip";

      // ì¸ì•± ë¸Œë¼ìš°ì € ì²´í¬ (ì¹´ì¹´ì˜¤í†¡, ì¸ìŠ¤íƒ€ê·¸ë¨)
      const userAgent = navigator.userAgent || navigator.vendor || window.opera;
      const isInApp = /KAKAOTALK|Instagram/i.test(userAgent);

      // 1. íƒœê·¸ ë³µì‚¬ (ì—ëŸ¬ ë¬´ì‹œ)
      try {
        await navigator.clipboard.writeText(instagramId);
        // ì¸ì•±ì´ ì•„ë‹ ë•Œë§Œ ì•Œë¦¼
        if (!isInApp) {
          alert(`ğŸ“‹ '${instagramId}' íƒœê·¸ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!\nì´ë¯¸ì§€ë¥¼ ì €ì¥ í›„ ì¸ìŠ¤íƒ€ê·¸ë¨ ìŠ¤í† ë¦¬ì— 'ë¶™ì—¬ë„£ê¸°' í•˜ì„¸ìš”.`);
        }
      } catch (err) {
        console.error('í´ë¦½ë³´ë“œ ë³µì‚¬ ì‹¤íŒ¨ (ë¬´ì‹œë¨):', err);
      }

      // 2. ìº¡ì²˜ ëª¨ë“œ ì§„ì…
      document.body.classList.add('capturing-mode');

      // 3. ì´ë¯¸ì§€ ìƒì„±
      try {
        const canvas = await html2canvas(captureArea, {
          backgroundColor: "#121212",
          scale: 2,
          useCORS: true,
          logging: false,
          ignoreElements: (element) => {
            if (element.id === 'intro-content' || (element.classList && element.classList.contains('brand-footer'))) {
              return true;
            }
            return false;
          }
        });

        document.body.classList.remove('capturing-mode');

        const imgDataUrl = canvas.toDataURL("image/png");

        // [QA FIX] ì¸ì•± ë¸Œë¼ìš°ì €(ì¹´í†¡, ì¸ìŠ¤íƒ€)ê±°ë‚˜ Share API ë¯¸ì§€ì› ì‹œ -> ë°”ë¡œ ì´ë¯¸ì§€ íŒì—…
        // ì´ìœ : ì¸ì•± ë¸Œë¼ìš°ì €ëŠ” navigator.share íŒŒì¼ ê³µìœ ê°€ ë¶ˆì•ˆì •í•˜ê±°ë‚˜ ë™ì‘í•˜ì§€ ì•ŠìŒ
        if (isInApp || !navigator.share || !navigator.canShare) {
          showImageModal(imgDataUrl);
          alert("ğŸ“· ê¾¹ ëˆŒëŸ¬ì„œ ì´ë¯¸ì§€ë¥¼ ì €ì¥í•˜ì„¸ìš”!\n(ì¸ìŠ¤íƒ€ê·¸ë¨/ì¹´ì¹´ì˜¤í†¡ ë¸Œë¼ìš°ì €ì—ì„œëŠ” ì´ë¯¸ì§€ ì €ì¥ì´ ì œí•œë  ìˆ˜ ìˆìŠµë‹ˆë‹¤)");
          return;
        }

        canvas.toBlob(async (blob) => {
          const file = new File([blob], "map-bti-result.png", { type: "image/png" });

          // 4. ì¼ë°˜ ë¸Œë¼ìš°ì €: ê³µìœ  ì‹œë„
          try {
            if (navigator.canShare({ files: [file] })) {
              await navigator.share({
                files: [file],
                title: 'MAP-BTI ê²°ê³¼',
                text: `ë‚´ ë¯¸ê° ì„±í–¥ì€? ${instagramId}`
              });
            } else {
              throw new Error("ê³µìœ  API íŒŒì¼ ë¯¸ì§€ì›");
            }
          } catch (shareError) {
            console.log('ê³µìœ  ì‹¤íŒ¨, íŒì—…ìœ¼ë¡œ ëŒ€ì²´', shareError);
            showImageModal(imgDataUrl);
          }
        }, 'image/png', 1.0);

      } catch (error) {
        console.error("ì´ë¯¸ì§€ ìº¡ì²˜ ì‹¤íŒ¨:", error);
        document.body.classList.remove('capturing-mode');
        alert("ì´ë¯¸ì§€ ìƒì„± ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
      }
    }

    // [ì¶”ê°€] ì´ë¯¸ì§€ íŒì—… ë³´ì—¬ì£¼ê¸° í•¨ìˆ˜
    function showImageModal(imgDataUrl) {
      const modal = document.getElementById('result-img-modal');
      const container = document.getElementById('modal-img-container');

      container.innerHTML = `<img src="${imgDataUrl}" alt="ê²°ê³¼ ì´ë¯¸ì§€" style="width:100%; height:auto;" />`;
      modal.style.display = 'flex';
    }

    // íŒì—… ë‹«ê¸°
    function closeModal() {
      document.getElementById('result-img-modal').style.display = 'none';
    }

    function goToLandingPage() {
      window.location.href = "https://buly.kr/1xzxUx8";
    }
  </script>
</body>

</html>